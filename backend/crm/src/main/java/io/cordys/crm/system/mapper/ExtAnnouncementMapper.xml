<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="io.cordys.crm.system.mapper.ExtAnnouncementMapper">

 <select id="selectByBaseRequest" parameterType="io.cordys.crm.system.dto.request.AnnouncementPageRequest" resultType="io.cordys.crm.system.dto.response.AnnouncementDTO">
     SELECT sys_announcement.*, sys_user.name as createUserName
     FROM sys_announcement
     LEFT JOIN sys_user ON sys_announcement.create_user = sys_user.id
     WHERE
     sys_announcement.organization_id = #{organizationId}
     <if test="keyword != null">
         and
         sys_announcement.subject like concat('%', #{keyword},'%')
     </if>
     ORDER BY
     sys_announcement.create_time DESC;
 </select>

    <select id="selectById" resultType="io.cordys.crm.system.dto.response.AnnouncementDTO">
        SELECT * FROM sys_announcement WHERE id = #{id}
    </select>

</mapper> 